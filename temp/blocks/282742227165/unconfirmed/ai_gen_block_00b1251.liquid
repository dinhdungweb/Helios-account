{% doc %}
  @prompt
    Please code a timeline section for me with a vertical layout, one side for text and the other for media (which could be an image or video), with interchangeable options. Optimize the code for fast page load times. The text column should have five characters at the top and a description at the bottom.
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-timeline-{{ ai_gen_id }} {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: {{ block.settings.section_padding }}px 20px;
    background-color: {{ block.settings.background_color }};
  }

  .ai-timeline-heading-{{ ai_gen_id }} {
    text-align: center;
    margin-bottom: {{ block.settings.heading_spacing }}px;
    color: {{ block.settings.heading_color }};
    font-size: {{ block.settings.heading_size }}px;
  }

  .ai-timeline-item-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: {{ block.settings.column_gap }}px;
    margin-bottom: {{ block.settings.item_spacing }}px;
    align-items: center;
  }

  .ai-timeline-item-{{ ai_gen_id }}:nth-child(even) .ai-timeline-text-{{ ai_gen_id }} {
    order: 2;
  }

  .ai-timeline-item-{{ ai_gen_id }}:nth-child(even) .ai-timeline-media-{{ ai_gen_id }} {
    order: 1;
  }

  .ai-timeline-text-{{ ai_gen_id }} {
    padding: {{ block.settings.text_padding }}px;
  }

  .ai-timeline-label-{{ ai_gen_id }} {
    display: inline-block;
    font-size: {{ block.settings.label_size }}px;
    font-weight: 600;
    color: {{ block.settings.label_color }};
    background-color: {{ block.settings.label_bg_color }};
    padding: 6px 12px;
    border-radius: {{ block.settings.label_border_radius }}px;
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .ai-timeline-description-{{ ai_gen_id }} {
    font-size: {{ block.settings.description_size }}px;
    line-height: 1.6;
    color: {{ block.settings.description_color }};
  }

  .ai-timeline-media-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    overflow: hidden;
    border-radius: {{ block.settings.media_border_radius }}px;
  }

  .ai-timeline-media-{{ ai_gen_id }} img,
  .ai-timeline-media-{{ ai_gen_id }} video {
    width: 100%;
    height: auto;
    display: block;
    border-radius: {{ block.settings.media_border_radius }}px;
  }

  .ai-timeline-media-{{ ai_gen_id }} video {
    object-fit: cover;
  }

  .ai-timeline-placeholder-{{ ai_gen_id }} {
    width: 100%;
    aspect-ratio: 4 / 3;
    background-color: #f4f4f4;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: {{ block.settings.media_border_radius }}px;
  }

  .ai-timeline-placeholder-{{ ai_gen_id }} svg {
    width: 60%;
    height: 60%;
    opacity: 0.3;
  }

  @media screen and (max-width: 768px) {
    .ai-timeline-item-{{ ai_gen_id }} {
      grid-template-columns: 1fr;
      gap: 20px;
    }

    .ai-timeline-item-{{ ai_gen_id }}:nth-child(even) .ai-timeline-text-{{ ai_gen_id }},
    .ai-timeline-item-{{ ai_gen_id }}:nth-child(even) .ai-timeline-media-{{ ai_gen_id }} {
      order: initial;
    }

    .ai-timeline-text-{{ ai_gen_id }} {
      padding: 20px 0;
    }
  }
{% endstyle %}

<div class="ai-timeline-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% if block.settings.section_heading != blank %}
    <h2 class="ai-timeline-heading-{{ ai_gen_id }}">{{ block.settings.section_heading }}</h2>
  {% endif %}

  {% for i in (1..5) %}
    {% liquid
      assign label_key = 'item_' | append: i | append: '_label'
      assign description_key = 'item_' | append: i | append: '_description'
      assign media_type_key = 'item_' | append: i | append: '_media_type'
      assign image_key = 'item_' | append: i | append: '_image'
      assign video_key = 'item_' | append: i | append: '_video'

      assign item_label = block.settings[label_key]
      assign item_description = block.settings[description_key]
      assign media_type = block.settings[media_type_key]
      assign item_image = block.settings[image_key]
      assign item_video = block.settings[video_key]
    %}

    {% if item_label != blank or item_description != blank %}
      <div class="ai-timeline-item-{{ ai_gen_id }}">
        <div class="ai-timeline-text-{{ ai_gen_id }}">
          {% if item_label != blank %}
            <div class="ai-timeline-label-{{ ai_gen_id }}">{{ item_label }}</div>
          {% endif %}
          {% if item_description != blank %}
            <div class="ai-timeline-description-{{ ai_gen_id }}">{{ item_description }}</div>
          {% endif %}
        </div>

        <div class="ai-timeline-media-{{ ai_gen_id }}">
          {% if media_type == 'image' %}
            {% if item_image %}
              <img
                src="{{ item_image | image_url: width: 800 }}"
                alt="{{ item_label | escape }}"
                loading="lazy"
                width="{{ item_image.width }}"
                height="{{ item_image.height }}"
              >
            {% else %}
              <div class="ai-timeline-placeholder-{{ ai_gen_id }}">
                {{ 'image' | placeholder_svg_tag }}
              </div>
            {% endif %}
          {% elsif media_type == 'video' %}
            {% if item_video %}
              <video
                src="{{ item_video }}"
                {% if block.settings.video_autoplay %}autoplay{% endif %}
                {% if block.settings.video_loop %}loop{% endif %}
                {% if block.settings.video_muted %}muted{% endif %}
                playsinline
                {% unless block.settings.video_controls %}controls{% endunless %}
              ></video>
            {% else %}
              <div class="ai-timeline-placeholder-{{ ai_gen_id }}">
                {{ 'image' | placeholder_svg_tag }}
              </div>
            {% endif %}
          {% endif %}
        </div>
      </div>
    {% endif %}
  {% endfor %}
</div>

{% schema %}
{
  "name": "Timeline",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Section"
    },
    {
      "type": "inline_richtext",
      "id": "section_heading",
      "label": "Heading",
      "default": "Our Journey"
    },
    {
      "type": "range",
      "id": "section_padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Section padding",
      "default": 60
    },
    {
      "type": "range",
      "id": "heading_spacing",
      "min": 20,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Heading spacing",
      "default": 40
    },
    {
      "type": "range",
      "id": "item_spacing",
      "min": 20,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Item spacing",
      "default": 60
    },
    {
      "type": "range",
      "id": "column_gap",
      "min": 20,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Column gap",
      "default": 40
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "label_color",
      "label": "Label text",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "label_bg_color",
      "label": "Label background",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 20,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Heading size",
      "default": 36
    },
    {
      "type": "range",
      "id": "label_size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Label size",
      "default": 12
    },
    {
      "type": "range",
      "id": "description_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Description size",
      "default": 16
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "range",
      "id": "text_padding",
      "min": 0,
      "max": 60,
      "step": 5,
      "unit": "px",
      "label": "Text padding",
      "default": 20
    },
    {
      "type": "range",
      "id": "label_border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Label border radius",
      "default": 4
    },
    {
      "type": "range",
      "id": "media_border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Media border radius",
      "default": 8
    },
    {
      "type": "header",
      "content": "Video settings"
    },
    {
      "type": "checkbox",
      "id": "video_autoplay",
      "label": "Autoplay",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "video_loop",
      "label": "Loop",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "video_muted",
      "label": "Mute",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "video_controls",
      "label": "Hide controls",
      "default": true
    },
    {
      "type": "header",
      "content": "Item 1"
    },
    {
      "type": "text",
      "id": "item_1_label",
      "label": "Label",
      "default": "2020"
    },
    {
      "type": "richtext",
      "id": "item_1_description",
      "label": "Description",
      "default": "<p>Our journey began with a vision to create timeless pieces that tell a story.</p>"
    },
    {
      "type": "select",
      "id": "item_1_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_1_image",
      "label": "Image"
    },
    {
      "type": "video_url",
      "id": "item_1_video",
      "label": "Video URL",
      "accept": ["youtube", "vimeo"]
    },
    {
      "type": "header",
      "content": "Item 2"
    },
    {
      "type": "text",
      "id": "item_2_label",
      "label": "Label",
      "default": "2021"
    },
    {
      "type": "richtext",
      "id": "item_2_description",
      "label": "Description",
      "default": "<p>Expanded our collection with new designs inspired by heritage and craftsmanship.</p>"
    },
    {
      "type": "select",
      "id": "item_2_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_2_image",
      "label": "Image"
    },
    {
      "type": "video_url",
      "id": "item_2_video",
      "label": "Video URL",
      "accept": ["youtube", "vimeo"]
    },
    {
      "type": "header",
      "content": "Item 3"
    },
    {
      "type": "text",
      "id": "item_3_label",
      "label": "Label",
      "default": "2022"
    },
    {
      "type": "richtext",
      "id": "item_3_description",
      "label": "Description",
      "default": "<p>Launched our flagship store and introduced exclusive limited editions.</p>"
    },
    {
      "type": "select",
      "id": "item_3_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_3_image",
      "label": "Image"
    },
    {
      "type": "video_url",
      "id": "item_3_video",
      "label": "Video URL",
      "accept": ["youtube", "vimeo"]
    },
    {
      "type": "header",
      "content": "Item 4"
    },
    {
      "type": "text",
      "id": "item_4_label",
      "label": "Label",
      "default": "2023"
    },
    {
      "type": "richtext",
      "id": "item_4_description",
      "label": "Description",
      "default": "<p>Reached new milestones with international recognition and awards.</p>"
    },
    {
      "type": "select",
      "id": "item_4_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_4_image",
      "label": "Image"
    },
    {
      "type": "video_url",
      "id": "item_4_video",
      "label": "Video URL",
      "accept": ["youtube", "vimeo"]
    },
    {
      "type": "header",
      "content": "Item 5"
    },
    {
      "type": "text",
      "id": "item_5_label",
      "label": "Label",
      "default": "2024"
    },
    {
      "type": "richtext",
      "id": "item_5_description",
      "label": "Description",
      "default": "<p>Continuing to innovate and create pieces that resonate with our community.</p>"
    },
    {
      "type": "select",
      "id": "item_5_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_5_image",
      "label": "Image"
    },
    {
      "type": "video_url",
      "id": "item_5_video",
      "label": "Video URL",
      "accept": ["youtube", "vimeo"]
    }
  ],
  "presets": [
    {
      "name": "Timeline"
    }
  ]
}
{% endschema %}
