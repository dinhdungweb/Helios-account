{% doc %}
  @prompt
    Please code a timeline section for me with a vertical layout, one side for text and the other for media (which could be an image or video), with interchangeable options. Optimize the code for fast page load times. The text column should have five characters at the top and a description at the bottom. , làm cho tôi 1 đường line ở giữa đánh dấu các mốc thời gian nữa, Video cho chọn video giống ảnh đi
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-timeline-{{ ai_gen_id }} {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: {{ block.settings.section_padding }}px 20px;
    background-color: {{ block.settings.background_color }};
  }

  .ai-timeline-heading-{{ ai_gen_id }} {
    text-align: center;
    margin-bottom: 60px;
  }

  .ai-timeline-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.heading_size }}px;
    color: {{ block.settings.heading_color }};
    margin: 0 0 16px;
  }

  .ai-timeline-subtitle-{{ ai_gen_id }} {
    font-size: {{ block.settings.subheading_size }}px;
    color: {{ block.settings.text_color }};
    margin: 0;
  }

  .ai-timeline-container-{{ ai_gen_id }} {
    position: relative;
    padding: 40px 0;
  }

  .ai-timeline-line-{{ ai_gen_id }} {
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: {{ block.settings.line_width }}px;
    background: {{ block.settings.line_color }};
    transform: translateX(-50%);
    z-index: 1;
  }

  .ai-timeline-item-{{ ai_gen_id }} {
    position: relative;
    display: grid;
    grid-template-columns: 1fr {{ block.settings.line_width }}px 1fr;
    gap: {{ block.settings.item_gap }}px;
    margin-bottom: {{ block.settings.item_spacing }}px;
    align-items: center;
  }

  .ai-timeline-item-{{ ai_gen_id }}:last-child {
    margin-bottom: 0;
  }

  .ai-timeline-content-{{ ai_gen_id }} {
    padding: {{ block.settings.content_padding }}px;
    background-color: {{ block.settings.content_bg_color }};
    border-radius: {{ block.settings.border_radius }}px;
    position: relative;
    z-index: 2;
  }

  .ai-timeline-year-{{ ai_gen_id }} {
    font-size: {{ block.settings.year_size }}px;
    color: {{ block.settings.year_color }};
    font-weight: 700;
    margin: 0 0 12px;
    letter-spacing: 2px;
  }

  .ai-timeline-description-{{ ai_gen_id }} {
    font-size: {{ block.settings.description_size }}px;
    color: {{ block.settings.text_color }};
    line-height: 1.6;
    margin: 0;
  }

  .ai-timeline-marker-{{ ai_gen_id }} {
    position: relative;
    z-index: 3;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ai-timeline-dot-{{ ai_gen_id }} {
    width: {{ block.settings.marker_size }}px;
    height: {{ block.settings.marker_size }}px;
    background-color: {{ block.settings.marker_color }};
    border: {{ block.settings.marker_border_width }}px solid {{ block.settings.marker_border_color }};
    border-radius: 50%;
    box-shadow: 0 0 0 {{ block.settings.marker_glow }}px {{ block.settings.marker_glow_color }};
  }

  .ai-timeline-media-{{ ai_gen_id }} {
    position: relative;
    z-index: 2;
    border-radius: {{ block.settings.media_border_radius }}px;
    overflow: hidden;
    background-color: {{ block.settings.media_bg_color }};
  }

  .ai-timeline-media-{{ ai_gen_id }} img {
    width: 100%;
    height: auto;
    display: block;
    object-fit: cover;
  }

  .ai-timeline-media-{{ ai_gen_id }} video {
    width: 100%;
    height: auto;
    display: block;
    object-fit: cover;
    max-height: 400px;
  }

  .ai-timeline-media-placeholder-{{ ai_gen_id }} {
    aspect-ratio: 4 / 3;
    background-color: {{ block.settings.media_bg_color }};
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .ai-timeline-media-placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    opacity: 0.3;
  }

  .ai-timeline-empty-state-{{ ai_gen_id }} {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 8px 16px;
    background-color: rgba(0, 0, 0, 0.6);
    color: #ffffff;
    font-size: 12px;
    border-radius: 4px;
    white-space: nowrap;
  }

  .ai-timeline-item-left-{{ ai_gen_id }} .ai-timeline-content-{{ ai_gen_id }} {
    grid-column: 1;
    grid-row: 1;
  }

  .ai-timeline-item-left-{{ ai_gen_id }} .ai-timeline-marker-{{ ai_gen_id }} {
    grid-column: 2;
    grid-row: 1;
  }

  .ai-timeline-item-left-{{ ai_gen_id }} .ai-timeline-media-{{ ai_gen_id }} {
    grid-column: 3;
    grid-row: 1;
  }

  .ai-timeline-item-right-{{ ai_gen_id }} .ai-timeline-media-{{ ai_gen_id }} {
    grid-column: 1;
    grid-row: 1;
  }

  .ai-timeline-item-right-{{ ai_gen_id }} .ai-timeline-marker-{{ ai_gen_id }} {
    grid-column: 2;
    grid-row: 1;
  }

  .ai-timeline-item-right-{{ ai_gen_id }} .ai-timeline-content-{{ ai_gen_id }} {
    grid-column: 3;
    grid-row: 1;
  }

  @media screen and (max-width: 768px) {
    .ai-timeline-line-{{ ai_gen_id }} {
      left: 30px;
    }

    .ai-timeline-item-{{ ai_gen_id }} {
      grid-template-columns: 60px 1fr;
      gap: 20px;
    }

    .ai-timeline-item-left-{{ ai_gen_id }} .ai-timeline-content-{{ ai_gen_id }},
    .ai-timeline-item-right-{{ ai_gen_id }} .ai-timeline-content-{{ ai_gen_id }} {
      grid-column: 2;
      grid-row: 1;
    }

    .ai-timeline-item-left-{{ ai_gen_id }} .ai-timeline-marker-{{ ai_gen_id }},
    .ai-timeline-item-right-{{ ai_gen_id }} .ai-timeline-marker-{{ ai_gen_id }} {
      grid-column: 1;
      grid-row: 1;
    }

    .ai-timeline-item-left-{{ ai_gen_id }} .ai-timeline-media-{{ ai_gen_id }},
    .ai-timeline-item-right-{{ ai_gen_id }} .ai-timeline-media-{{ ai_gen_id }} {
      grid-column: 2;
      grid-row: 2;
      margin-top: 16px;
    }

    .ai-timeline-title-{{ ai_gen_id }} {
      font-size: {{ block.settings.heading_size | times: 0.7 }}px;
    }

    .ai-timeline-subtitle-{{ ai_gen_id }} {
      font-size: {{ block.settings.subheading_size | times: 0.85 }}px;
    }

    .ai-timeline-year-{{ ai_gen_id }} {
      font-size: {{ block.settings.year_size | times: 0.8 }}px;
    }

    .ai-timeline-description-{{ ai_gen_id }} {
      font-size: {{ block.settings.description_size | times: 0.9 }}px;
    }
  }
{% endstyle %}

<div class="ai-timeline-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% if block.settings.heading != blank or block.settings.subheading != blank %}
    <div class="ai-timeline-heading-{{ ai_gen_id }}">
      {% if block.settings.heading != blank %}
        <h2 class="ai-timeline-title-{{ ai_gen_id }}">{{ block.settings.heading }}</h2>
      {% endif %}
      {% if block.settings.subheading != blank %}
        <div class="ai-timeline-subtitle-{{ ai_gen_id }}">{{ block.settings.subheading }}</div>
      {% endif %}
    </div>
  {% endif %}

  <div class="ai-timeline-container-{{ ai_gen_id }}">
    <div class="ai-timeline-line-{{ ai_gen_id }}"></div>

    {% for i in (1..5) %}
      {% liquid
        assign item_enabled_key = 'item_' | append: i | append: '_enabled'
        assign item_year_key = 'item_' | append: i | append: '_year'
        assign item_description_key = 'item_' | append: i | append: '_description'
        assign item_media_type_key = 'item_' | append: i | append: '_media_type'
        assign item_image_key = 'item_' | append: i | append: '_image'
        assign item_video_key = 'item_' | append: i | append: '_video'
        assign item_layout_key = 'item_' | append: i | append: '_layout'

        assign item_enabled = block.settings[item_enabled_key]
        assign item_year = block.settings[item_year_key]
        assign item_description = block.settings[item_description_key]
        assign item_media_type = block.settings[item_media_type_key]
        assign item_image = block.settings[item_image_key]
        assign item_video = block.settings[item_video_key]
        assign item_layout = block.settings[item_layout_key]
      %}

      {% if item_enabled %}
        <div class="ai-timeline-item-{{ ai_gen_id }} ai-timeline-item-{{ item_layout }}-{{ ai_gen_id }}">
          <div class="ai-timeline-content-{{ ai_gen_id }}">
            {% if item_year != blank %}
              <div class="ai-timeline-year-{{ ai_gen_id }}">{{ item_year }}</div>
            {% endif %}
            {% if item_description != blank %}
              <div class="ai-timeline-description-{{ ai_gen_id }}">{{ item_description }}</div>
            {% endif %}
          </div>

          <div class="ai-timeline-marker-{{ ai_gen_id }}">
            <div class="ai-timeline-dot-{{ ai_gen_id }}"></div>
          </div>

          <div class="ai-timeline-media-{{ ai_gen_id }}">
            {% if item_media_type == 'image' %}
              {% if item_image %}
                <img
                  src="{{ item_image | image_url: width: 800 }}"
                  alt="{{ item_year | escape }}"
                  loading="lazy"
                  width="800"
                  height="600"
                >
              {% else %}
                <div class="ai-timeline-media-placeholder-{{ ai_gen_id }}">
                  {{ 'image' | placeholder_svg_tag }}
                  <div class="ai-timeline-empty-state-{{ ai_gen_id }}">
                    Add an image
                  </div>
                </div>
              {% endif %}
            {% else %}
              {% if item_video %}
                {{
                  item_video
                  | video_tag:
                    image_size: '800x',
                    controls: true,
                    preload: 'metadata',
                    playsinline: true,
                    muted: false
                }}
              {% else %}
                <div class="ai-timeline-media-placeholder-{{ ai_gen_id }}">
                  {{ 'image' | placeholder_svg_tag }}
                  <div class="ai-timeline-empty-state-{{ ai_gen_id }}">
                    Add a video
                  </div>
                </div>
              {% endif %}
            {% endif %}
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Timeline",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Heading"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Our Journey"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Discover the milestones that shaped our story"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 20,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Heading size",
      "default": 36
    },
    {
      "type": "range",
      "id": "subheading_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Subheading size",
      "default": 16
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Timeline style"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#f2f2f2"
    },
    {
      "type": "range",
      "id": "section_padding",
      "min": 20,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Section padding",
      "default": 60
    },
    {
      "type": "header",
      "content": "Timeline line"
    },
    {
      "type": "range",
      "id": "line_width",
      "min": 2,
      "max": 10,
      "step": 1,
      "unit": "px",
      "label": "Line width",
      "default": 4
    },
    {
      "type": "color",
      "id": "line_color",
      "label": "Line color",
      "default": "#fab320"
    },
    {
      "type": "header",
      "content": "Timeline markers"
    },
    {
      "type": "range",
      "id": "marker_size",
      "min": 10,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Marker size",
      "default": 20
    },
    {
      "type": "color",
      "id": "marker_color",
      "label": "Marker color",
      "default": "#fab320"
    },
    {
      "type": "range",
      "id": "marker_border_width",
      "min": 0,
      "max": 6,
      "step": 1,
      "unit": "px",
      "label": "Marker border width",
      "default": 3
    },
    {
      "type": "color",
      "id": "marker_border_color",
      "label": "Marker border color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "marker_glow",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Marker glow",
      "default": 8
    },
    {
      "type": "color",
      "id": "marker_glow_color",
      "label": "Marker glow color",
      "default": "rgba(250, 179, 32, 0.3)"
    },
    {
      "type": "header",
      "content": "Content cards"
    },
    {
      "type": "color",
      "id": "content_bg_color",
      "label": "Content background",
      "default": "#1a1a1a"
    },
    {
      "type": "range",
      "id": "content_padding",
      "min": 10,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Content padding",
      "default": 25
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 12
    },
    {
      "type": "range",
      "id": "year_size",
      "min": 14,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Year size",
      "default": 24
    },
    {
      "type": "color",
      "id": "year_color",
      "label": "Year color",
      "default": "#fab320"
    },
    {
      "type": "range",
      "id": "description_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Description size",
      "default": 15
    },
    {
      "type": "header",
      "content": "Media"
    },
    {
      "type": "color",
      "id": "media_bg_color",
      "label": "Media background",
      "default": "#2a2a2a"
    },
    {
      "type": "range",
      "id": "media_border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Media border radius",
      "default": 12
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "item_spacing",
      "min": 30,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Item spacing",
      "default": 60
    },
    {
      "type": "range",
      "id": "item_gap",
      "min": 20,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Item gap",
      "default": 40
    },
    {
      "type": "header",
      "content": "Timeline item 1"
    },
    {
      "type": "checkbox",
      "id": "item_1_enabled",
      "label": "Enable item 1",
      "default": true
    },
    {
      "type": "text",
      "id": "item_1_year",
      "label": "Year",
      "default": "2020"
    },
    {
      "type": "textarea",
      "id": "item_1_description",
      "label": "Description",
      "default": "Our journey began with a vision to create timeless jewelry pieces that tell a story."
    },
    {
      "type": "select",
      "id": "item_1_layout",
      "label": "Layout",
      "options": [
        {
          "value": "left",
          "label": "Text left, media right"
        },
        {
          "value": "right",
          "label": "Media left, text right"
        }
      ],
      "default": "left"
    },
    {
      "type": "select",
      "id": "item_1_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_1_image",
      "label": "Image"
    },
    {
      "type": "video",
      "id": "item_1_video",
      "label": "Video"
    },
    {
      "type": "header",
      "content": "Timeline item 2"
    },
    {
      "type": "checkbox",
      "id": "item_2_enabled",
      "label": "Enable item 2",
      "default": true
    },
    {
      "type": "text",
      "id": "item_2_year",
      "label": "Year",
      "default": "2021"
    },
    {
      "type": "textarea",
      "id": "item_2_description",
      "label": "Description",
      "default": "Expanded our collection with heritage-inspired designs that celebrate craftsmanship."
    },
    {
      "type": "select",
      "id": "item_2_layout",
      "label": "Layout",
      "options": [
        {
          "value": "left",
          "label": "Text left, media right"
        },
        {
          "value": "right",
          "label": "Media left, text right"
        }
      ],
      "default": "right"
    },
    {
      "type": "select",
      "id": "item_2_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_2_image",
      "label": "Image"
    },
    {
      "type": "video",
      "id": "item_2_video",
      "label": "Video"
    },
    {
      "type": "header",
      "content": "Timeline item 3"
    },
    {
      "type": "checkbox",
      "id": "item_3_enabled",
      "label": "Enable item 3",
      "default": true
    },
    {
      "type": "text",
      "id": "item_3_year",
      "label": "Year",
      "default": "2022"
    },
    {
      "type": "textarea",
      "id": "item_3_description",
      "label": "Description",
      "default": "Launched our flagship store and introduced exclusive limited-edition collections."
    },
    {
      "type": "select",
      "id": "item_3_layout",
      "label": "Layout",
      "options": [
        {
          "value": "left",
          "label": "Text left, media right"
        },
        {
          "value": "right",
          "label": "Media left, text right"
        }
      ],
      "default": "left"
    },
    {
      "type": "select",
      "id": "item_3_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_3_image",
      "label": "Image"
    },
    {
      "type": "video",
      "id": "item_3_video",
      "label": "Video"
    },
    {
      "type": "header",
      "content": "Timeline item 4"
    },
    {
      "type": "checkbox",
      "id": "item_4_enabled",
      "label": "Enable item 4",
      "default": true
    },
    {
      "type": "text",
      "id": "item_4_year",
      "label": "Year",
      "default": "2023"
    },
    {
      "type": "textarea",
      "id": "item_4_description",
      "label": "Description",
      "default": "Reached new milestones with international recognition and expanded our community."
    },
    {
      "type": "select",
      "id": "item_4_layout",
      "label": "Layout",
      "options": [
        {
          "value": "left",
          "label": "Text left, media right"
        },
        {
          "value": "right",
          "label": "Media left, text right"
        }
      ],
      "default": "right"
    },
    {
      "type": "select",
      "id": "item_4_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_4_image",
      "label": "Image"
    },
    {
      "type": "video",
      "id": "item_4_video",
      "label": "Video"
    },
    {
      "type": "header",
      "content": "Timeline item 5"
    },
    {
      "type": "checkbox",
      "id": "item_5_enabled",
      "label": "Enable item 5",
      "default": true
    },
    {
      "type": "text",
      "id": "item_5_year",
      "label": "Year",
      "default": "2024"
    },
    {
      "type": "textarea",
      "id": "item_5_description",
      "label": "Description",
      "default": "Continuing to innovate and create meaningful pieces that resonate with our customers."
    },
    {
      "type": "select",
      "id": "item_5_layout",
      "label": "Layout",
      "options": [
        {
          "value": "left",
          "label": "Text left, media right"
        },
        {
          "value": "right",
          "label": "Media left, text right"
        }
      ],
      "default": "left"
    },
    {
      "type": "select",
      "id": "item_5_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_5_image",
      "label": "Image"
    },
    {
      "type": "video",
      "id": "item_5_video",
      "label": "Video"
    }
  ],
  "presets": [
    {
      "name": "Timeline"
    }
  ]
}
{% endschema %}
