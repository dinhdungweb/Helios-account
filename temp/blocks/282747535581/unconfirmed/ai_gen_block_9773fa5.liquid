{% doc %}
  @prompt
    Please code a timeline section for me with a vertical layout, one side for text and the other for media (which could be an image or video), with interchangeable options. Optimize the code for fast page load times. The text column should have five characters at the top and a description at the bottom.
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-timeline-{{ ai_gen_id }} {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 20px;
  }

  .ai-timeline-item-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    margin-bottom: 60px;
    align-items: center;
  }

  .ai-timeline-item-{{ ai_gen_id }}:last-child {
    margin-bottom: 0;
  }

  .ai-timeline-content-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .ai-timeline-label-{{ ai_gen_id }} {
    font-size: {{ block.settings.label_size }}px;
    color: {{ block.settings.label_color }};
    font-weight: 600;
    letter-spacing: 2px;
    text-transform: uppercase;
  }

  .ai-timeline-description-{{ ai_gen_id }} {
    font-size: {{ block.settings.description_size }}px;
    color: {{ block.settings.description_color }};
    line-height: 1.6;
  }

  .ai-timeline-media-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    overflow: hidden;
    border-radius: {{ block.settings.media_border_radius }}px;
  }

  .ai-timeline-media-{{ ai_gen_id }} img {
    width: 100%;
    height: auto;
    display: block;
    object-fit: cover;
  }

  .ai-timeline-media-{{ ai_gen_id }} video {
    width: 100%;
    height: auto;
    display: block;
  }

  .ai-timeline-media-placeholder-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    padding-bottom: 75%;
    background-color: #f4f4f4;
    border-radius: {{ block.settings.media_border_radius }}px;
  }

  .ai-timeline-media-placeholder-{{ ai_gen_id }} svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .ai-timeline-empty-state-{{ ai_gen_id }} {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 14px;
    color: #999;
    text-align: center;
    pointer-events: none;
  }

  @media screen and (max-width: 768px) {
    .ai-timeline-item-{{ ai_gen_id }} {
      grid-template-columns: 1fr;
      gap: 24px;
      margin-bottom: 40px;
    }

    .ai-timeline-content-{{ ai_gen_id }} {
      order: 2;
    }

    .ai-timeline-media-{{ ai_gen_id }} {
      order: 1;
    }
  }
{% endstyle %}

<div class="ai-timeline-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% for i in (1..5) %}
    {% liquid
      assign label_key = 'item_' | append: i | append: '_label'
      assign description_key = 'item_' | append: i | append: '_description'
      assign media_type_key = 'item_' | append: i | append: '_media_type'
      assign image_key = 'item_' | append: i | append: '_image'
      assign video_key = 'item_' | append: i | append: '_video'
      assign layout_key = 'item_' | append: i | append: '_layout'

      assign label = block.settings[label_key]
      assign description = block.settings[description_key]
      assign media_type = block.settings[media_type_key]
      assign image = block.settings[image_key]
      assign video = block.settings[video_key]
      assign layout = block.settings[layout_key]

      assign has_content = false
      if label != blank or description != blank
        assign has_content = true
      endif
    %}

    {% if has_content %}
      <div class="ai-timeline-item-{{ ai_gen_id }}">
        {% if layout == 'text_left' %}
          <div class="ai-timeline-content-{{ ai_gen_id }}">
            {% if label != blank %}
              <div class="ai-timeline-label-{{ ai_gen_id }}">{{ label }}</div>
            {% endif %}
            {% if description != blank %}
              <div class="ai-timeline-description-{{ ai_gen_id }}">{{ description }}</div>
            {% endif %}
          </div>

          <div class="ai-timeline-media-{{ ai_gen_id }}">
            {% if media_type == 'image' %}
              {% if image %}
                <img
                  src="{{ image | image_url: width: 800 }}"
                  alt="{{ image.alt | escape }}"
                  loading="lazy"
                  width="{{ image.width }}"
                  height="{{ image.height }}"
                >
              {% else %}
                <div class="ai-timeline-media-placeholder-{{ ai_gen_id }}">
                  {{ 'image' | placeholder_svg_tag }}
                  <div class="ai-timeline-empty-state-{{ ai_gen_id }}">
                    Add an image
                  </div>
                </div>
              {% endif %}
            {% else %}
              {% if video %}
                <video
                  src="{{ video }}"
                  controls
                  preload="metadata"
                  playsinline
                >
                  Your browser does not support the video tag.
                </video>
              {% else %}
                <div class="ai-timeline-media-placeholder-{{ ai_gen_id }}">
                  {{ 'image' | placeholder_svg_tag }}
                  <div class="ai-timeline-empty-state-{{ ai_gen_id }}">
                    Add a video URL
                  </div>
                </div>
              {% endif %}
            {% endif %}
          </div>
        {% else %}
          <div class="ai-timeline-media-{{ ai_gen_id }}">
            {% if media_type == 'image' %}
              {% if image %}
                <img
                  src="{{ image | image_url: width: 800 }}"
                  alt="{{ image.alt | escape }}"
                  loading="lazy"
                  width="{{ image.width }}"
                  height="{{ image.height }}"
                >
              {% else %}
                <div class="ai-timeline-media-placeholder-{{ ai_gen_id }}">
                  {{ 'image' | placeholder_svg_tag }}
                  <div class="ai-timeline-empty-state-{{ ai_gen_id }}">
                    Add an image
                  </div>
                </div>
              {% endif %}
            {% else %}
              {% if video %}
                <video
                  src="{{ video }}"
                  controls
                  preload="metadata"
                  playsinline
                >
                  Your browser does not support the video tag.
                </video>
              {% else %}
                <div class="ai-timeline-media-placeholder-{{ ai_gen_id }}">
                  {{ 'image' | placeholder_svg_tag }}
                  <div class="ai-timeline-empty-state-{{ ai_gen_id }}">
                    Add a video URL
                  </div>
                </div>
              {% endif %}
            {% endif %}
          </div>

          <div class="ai-timeline-content-{{ ai_gen_id }}">
            {% if label != blank %}
              <div class="ai-timeline-label-{{ ai_gen_id }}">{{ label }}</div>
            {% endif %}
            {% if description != blank %}
              <div class="ai-timeline-description-{{ ai_gen_id }}">{{ description }}</div>
            {% endif %}
          </div>
        {% endif %}
      </div>
    {% endif %}
  {% endfor %}
</div>

{% schema %}
{
  "name": "Timeline",
  "settings": [
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "label_size",
      "min": 10,
      "max": 30,
      "step": 1,
      "unit": "px",
      "label": "Label size",
      "default": 14
    },
    {
      "type": "color",
      "id": "label_color",
      "label": "Label color",
      "default": "#fab320"
    },
    {
      "type": "range",
      "id": "description_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Description size",
      "default": 16
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description color",
      "default": "#f2f2f2"
    },
    {
      "type": "header",
      "content": "Media"
    },
    {
      "type": "range",
      "id": "media_border_radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 8
    },
    {
      "type": "header",
      "content": "Item 1"
    },
    {
      "type": "text",
      "id": "item_1_label",
      "label": "Label"
    },
    {
      "type": "textarea",
      "id": "item_1_description",
      "label": "Description"
    },
    {
      "type": "select",
      "id": "item_1_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_1_image",
      "label": "Image"
    },
    {
      "type": "url",
      "id": "item_1_video",
      "label": "Video URL"
    },
    {
      "type": "select",
      "id": "item_1_layout",
      "label": "Layout",
      "options": [
        {
          "value": "text_left",
          "label": "Text left, media right"
        },
        {
          "value": "media_left",
          "label": "Media left, text right"
        }
      ],
      "default": "text_left"
    },
    {
      "type": "header",
      "content": "Item 2"
    },
    {
      "type": "text",
      "id": "item_2_label",
      "label": "Label"
    },
    {
      "type": "textarea",
      "id": "item_2_description",
      "label": "Description"
    },
    {
      "type": "select",
      "id": "item_2_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_2_image",
      "label": "Image"
    },
    {
      "type": "url",
      "id": "item_2_video",
      "label": "Video URL"
    },
    {
      "type": "select",
      "id": "item_2_layout",
      "label": "Layout",
      "options": [
        {
          "value": "text_left",
          "label": "Text left, media right"
        },
        {
          "value": "media_left",
          "label": "Media left, text right"
        }
      ],
      "default": "media_left"
    },
    {
      "type": "header",
      "content": "Item 3"
    },
    {
      "type": "text",
      "id": "item_3_label",
      "label": "Label"
    },
    {
      "type": "textarea",
      "id": "item_3_description",
      "label": "Description"
    },
    {
      "type": "select",
      "id": "item_3_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_3_image",
      "label": "Image"
    },
    {
      "type": "url",
      "id": "item_3_video",
      "label": "Video URL"
    },
    {
      "type": "select",
      "id": "item_3_layout",
      "label": "Layout",
      "options": [
        {
          "value": "text_left",
          "label": "Text left, media right"
        },
        {
          "value": "media_left",
          "label": "Media left, text right"
        }
      ],
      "default": "text_left"
    },
    {
      "type": "header",
      "content": "Item 4"
    },
    {
      "type": "text",
      "id": "item_4_label",
      "label": "Label"
    },
    {
      "type": "textarea",
      "id": "item_4_description",
      "label": "Description"
    },
    {
      "type": "select",
      "id": "item_4_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_4_image",
      "label": "Image"
    },
    {
      "type": "url",
      "id": "item_4_video",
      "label": "Video URL"
    },
    {
      "type": "select",
      "id": "item_4_layout",
      "label": "Layout",
      "options": [
        {
          "value": "text_left",
          "label": "Text left, media right"
        },
        {
          "value": "media_left",
          "label": "Media left, text right"
        }
      ],
      "default": "media_left"
    },
    {
      "type": "header",
      "content": "Item 5"
    },
    {
      "type": "text",
      "id": "item_5_label",
      "label": "Label"
    },
    {
      "type": "textarea",
      "id": "item_5_description",
      "label": "Description"
    },
    {
      "type": "select",
      "id": "item_5_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_5_image",
      "label": "Image"
    },
    {
      "type": "url",
      "id": "item_5_video",
      "label": "Video URL"
    },
    {
      "type": "select",
      "id": "item_5_layout",
      "label": "Layout",
      "options": [
        {
          "value": "text_left",
          "label": "Text left, media right"
        },
        {
          "value": "media_left",
          "label": "Media left, text right"
        }
      ],
      "default": "text_left"
    }
  ],
  "presets": [
    {
      "name": "Timeline"
    }
  ],
  "tag": null
}
{% endschema %}