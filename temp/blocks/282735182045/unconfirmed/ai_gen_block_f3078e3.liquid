{% doc %}
  @prompt
    Please code a timeline section for me with a vertical layout, one side for text and the other for media (which could be an image or video), with the options interchangeable. Optimize the code for fast page load times. The text column should have five characters at the top and a description at the bottom.
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-timeline-{{ ai_gen_id }} {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: {{ block.settings.section_padding }}px 20px;
    background-color: {{ block.settings.background_color }};
  }

  .ai-timeline-heading-{{ ai_gen_id }} {
    text-align: center;
    margin-bottom: 60px;
  }

  .ai-timeline-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.heading_size }}px;
    color: {{ block.settings.heading_color }};
    margin: 0;
  }

  .ai-timeline-items-{{ ai_gen_id }} {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: {{ block.settings.item_spacing }}px;
  }

  .ai-timeline-item-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    align-items: center;
    position: relative;
  }

  .ai-timeline-item-{{ ai_gen_id }}:nth-child(even) .ai-timeline-content-{{ ai_gen_id }} {
    order: 2;
  }

  .ai-timeline-item-{{ ai_gen_id }}:nth-child(even) .ai-timeline-media-{{ ai_gen_id }} {
    order: 1;
  }

  .ai-timeline-content-{{ ai_gen_id }} {
    padding: 20px;
  }

  .ai-timeline-character-{{ ai_gen_id }} {
    font-size: {{ block.settings.character_size }}px;
    color: {{ block.settings.character_color }};
    font-weight: 700;
    margin-bottom: 16px;
    display: block;
  }

  .ai-timeline-description-{{ ai_gen_id }} {
    font-size: {{ block.settings.description_size }}px;
    color: {{ block.settings.description_color }};
    line-height: 1.6;
  }

  .ai-timeline-media-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    border-radius: {{ block.settings.media_border_radius }}px;
    overflow: hidden;
  }

  .ai-timeline-media-{{ ai_gen_id }} img {
    width: 100%;
    height: auto;
    display: block;
    object-fit: cover;
  }

  .ai-timeline-media-{{ ai_gen_id }} video {
    width: 100%;
    height: auto;
    display: block;
  }

  .ai-timeline-media-placeholder-{{ ai_gen_id }} {
    width: 100%;
    aspect-ratio: 16 / 9;
    background-color: #f4f4f4;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: {{ block.settings.media_border_radius }}px;
  }

  .ai-timeline-media-placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    max-width: 300px;
    max-height: 300px;
  }

  @media screen and (max-width: 768px) {
    .ai-timeline-item-{{ ai_gen_id }} {
      grid-template-columns: 1fr;
      gap: 20px;
    }

    .ai-timeline-item-{{ ai_gen_id }}:nth-child(even) .ai-timeline-content-{{ ai_gen_id }},
    .ai-timeline-item-{{ ai_gen_id }}:nth-child(even) .ai-timeline-media-{{ ai_gen_id }} {
      order: initial;
    }

    .ai-timeline-title-{{ ai_gen_id }} {
      font-size: {{ block.settings.heading_size | times: 0.7 }}px;
    }

    .ai-timeline-character-{{ ai_gen_id }} {
      font-size: {{ block.settings.character_size | times: 0.8 }}px;
    }

    .ai-timeline-description-{{ ai_gen_id }} {
      font-size: {{ block.settings.description_size | times: 0.9 }}px;
    }
  }
{% endstyle %}

<div class="ai-timeline-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% if block.settings.heading != blank %}
    <div class="ai-timeline-heading-{{ ai_gen_id }}">
      <h2 class="ai-timeline-title-{{ ai_gen_id }}">{{ block.settings.heading }}</h2>
    </div>
  {% endif %}

  <div class="ai-timeline-items-{{ ai_gen_id }}">
    {% for i in (1..5) %}
      {% liquid
        assign character_key = 'item_' | append: i | append: '_character'
        assign description_key = 'item_' | append: i | append: '_description'
        assign media_type_key = 'item_' | append: i | append: '_media_type'
        assign image_key = 'item_' | append: i | append: '_image'
        assign video_key = 'item_' | append: i | append: '_video'

        assign character = block.settings[character_key]
        assign description = block.settings[description_key]
        assign media_type = block.settings[media_type_key]
        assign image = block.settings[image_key]
        assign video = block.settings[video_key]
      %}

      {% if character != blank or description != blank %}
        <div class="ai-timeline-item-{{ ai_gen_id }}">
          <div class="ai-timeline-content-{{ ai_gen_id }}">
            {% if character != blank %}
              <span class="ai-timeline-character-{{ ai_gen_id }}">{{ character }}</span>
            {% endif %}
            {% if description != blank %}
              <div class="ai-timeline-description-{{ ai_gen_id }}">{{ description }}</div>
            {% endif %}
          </div>

          <div class="ai-timeline-media-{{ ai_gen_id }}">
            {% if media_type == 'video' and video != blank %}
              {{ video | video_tag: autoplay: true, loop: true, muted: true, controls: false, loading: 'lazy' }}
            {% elsif media_type == 'image' and image != blank %}
              <img
                src="{{ image | image_url: width: 800 }}"
                alt="{{ character | escape }}"
                loading="lazy"
                width="{{ image.width }}"
                height="{{ image.height }}"
              >
            {% else %}
              <div class="ai-timeline-media-placeholder-{{ ai_gen_id }}">
                {{ 'image' | placeholder_svg_tag }}
              </div>
            {% endif %}
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Timeline",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Section"
    },
    {
      "type": "inline_richtext",
      "id": "heading",
      "label": "Heading",
      "default": "Our Journey"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "section_padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Padding",
      "default": 60
    },
    {
      "type": "range",
      "id": "item_spacing",
      "min": 20,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Space between items",
      "default": 60
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 20,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Heading size",
      "default": 40
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#f2f2f2"
    },
    {
      "type": "range",
      "id": "character_size",
      "min": 12,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Character size",
      "default": 24
    },
    {
      "type": "color",
      "id": "character_color",
      "label": "Character color",
      "default": "#fab320"
    },
    {
      "type": "range",
      "id": "description_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Description size",
      "default": 16
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description color",
      "default": "#f2f2f2"
    },
    {
      "type": "header",
      "content": "Media"
    },
    {
      "type": "range",
      "id": "media_border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 8
    },
    {
      "type": "header",
      "content": "Item 1"
    },
    {
      "type": "text",
      "id": "item_1_character",
      "label": "Character",
      "default": "2020"
    },
    {
      "type": "richtext",
      "id": "item_1_description",
      "label": "Description",
      "default": "<p>The beginning of our journey, where passion met purpose and dreams took their first steps.</p>"
    },
    {
      "type": "select",
      "id": "item_1_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_1_image",
      "label": "Image"
    },
    {
      "type": "video",
      "id": "item_1_video",
      "label": "Video"
    },
    {
      "type": "header",
      "content": "Item 2"
    },
    {
      "type": "text",
      "id": "item_2_character",
      "label": "Character",
      "default": "2021"
    },
    {
      "type": "richtext",
      "id": "item_2_description",
      "label": "Description",
      "default": "<p>Expanding horizons and reaching new milestones as we grew our community.</p>"
    },
    {
      "type": "select",
      "id": "item_2_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_2_image",
      "label": "Image"
    },
    {
      "type": "video",
      "id": "item_2_video",
      "label": "Video"
    },
    {
      "type": "header",
      "content": "Item 3"
    },
    {
      "type": "text",
      "id": "item_3_character",
      "label": "Character",
      "default": "2022"
    },
    {
      "type": "richtext",
      "id": "item_3_description",
      "label": "Description",
      "default": "<p>Innovation and creativity drove us forward as we launched groundbreaking products.</p>"
    },
    {
      "type": "select",
      "id": "item_3_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_3_image",
      "label": "Image"
    },
    {
      "type": "video",
      "id": "item_3_video",
      "label": "Video"
    },
    {
      "type": "header",
      "content": "Item 4"
    },
    {
      "type": "text",
      "id": "item_4_character",
      "label": "Character",
      "default": "2023"
    },
    {
      "type": "richtext",
      "id": "item_4_description",
      "label": "Description",
      "default": "<p>Building stronger connections and celebrating achievements with our valued customers.</p>"
    },
    {
      "type": "select",
      "id": "item_4_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_4_image",
      "label": "Image"
    },
    {
      "type": "video",
      "id": "item_4_video",
      "label": "Video"
    },
    {
      "type": "header",
      "content": "Item 5"
    },
    {
      "type": "text",
      "id": "item_5_character",
      "label": "Character",
      "default": "2024"
    },
    {
      "type": "richtext",
      "id": "item_5_description",
      "label": "Description",
      "default": "<p>Looking ahead to the future with renewed vision and endless possibilities.</p>"
    },
    {
      "type": "select",
      "id": "item_5_media_type",
      "label": "Media type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "item_5_image",
      "label": "Image"
    },
    {
      "type": "video",
      "id": "item_5_video",
      "label": "Video"
    }
  ],
  "presets": [
    {
      "name": "Timeline"
    }
  ]
}
{% endschema %}
