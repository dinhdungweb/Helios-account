{% comment %}
  Snippet: Check Total Spent Lock (DEPRECATED - use check-content-lock instead)
  Usage: {% render 'check-total-spent-lock', customer: customer %}
  Outputs: 1 (locked) or 0 (unlocked)
  
  Logic: 
  - Trả về 1 (LOCKED) nếu customer chưa mua hàng (total_spent = 0 hoặc blank)
  - Trả về 0 (UNLOCKED) nếu customer đã mua hàng (total_spent > 0)
{% endcomment %}

{% assign is_locked = 1 %}

{% if customer %}
  {% comment %} Chỉ dùng custom metafield total_spent {% endcomment %}
  {% assign total_spent = customer.metafields.custom.total_spent | default: 0 | plus: 0 %}
  {% if total_spent > 0 %}
    {% assign is_locked = 0 %}
  {% endif %}
{% endif %}

{{ is_locked }}
