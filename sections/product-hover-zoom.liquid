{{ 'product-hover-zoom.css' | asset_url | stylesheet_tag }}

<section class="product-hover-zoom-section" style="--section-height: {{ section.settings.section_height }}px; --list-width: {{ section.settings.list_width_px }}px; --thumb-size: {{ section.settings.thumb_size }}px; --image-ratio: {{ section.settings.image_ratio }};">
  <ul class="product-hover-zoom__list" id="goods-list">
    {%- for block in section.blocks -%}
      <li class="product-hover-zoom__item" {{ block.shopify_attributes }}>
        <div class="product-hover-zoom__goods">
          {%- if block.settings.product_image != blank -%}
            <img 
              src="{{ block.settings.product_image | image_url: width: 400 }}"
              alt="{{ block.settings.product_name | escape }}"
              class="product-hover-zoom__thumb"
              loading="lazy"
            >
          {%- else -%}
            {{ 'product-1' | placeholder_svg_tag: 'product-hover-zoom__placeholder' }}
          {%- endif -%}
          <p class="product-hover-zoom__name">
            <a href="{{ block.settings.product_link }}">{{ block.settings.product_name }}</a>
          </p>
        </div>
        
        <div class="product-hover-zoom__zoom">
          {%- if block.settings.zoom_image_pc != blank -%}
            <img 
              class="product-hover-zoom__zoom-pc"
              src="{{ block.settings.zoom_image_pc | image_url: width: 1920 }}"
              alt="{{ block.settings.product_name | escape }}"
              loading="lazy"
            >
          {%- endif -%}
          {%- if block.settings.zoom_image_mobile != blank -%}
            <img 
              class="product-hover-zoom__zoom-mo"
              src="{{ block.settings.zoom_image_mobile | image_url: width: 800 }}"
              alt="{{ block.settings.product_name | escape }}"
              loading="lazy"
            >
          {%- endif -%}
        </div>
        
        <div class="product-hover-zoom__detail"></div>
      </li>
    {%- endfor -%}
  </ul>
</section>

{% schema %}
{
  "name": "Product Hover Zoom",
  "class": "section-product-hover-zoom",
  "settings": [
    {
      "type": "range",
      "id": "section_height",
      "label": "Chiều cao section (px)",
      "min": 600,
      "max": 1200,
      "step": 10,
      "default": 1080,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "list_width_px",
      "label": "Chiều rộng danh sách sản phẩm (px)",
      "min": 800,
      "max": 1600,
      "step": 20,
      "default": 1200,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "thumb_size",
      "label": "Chiều rộng ảnh sản phẩm (px)",
      "min": 50,
      "max": 400,
      "step": 5,
      "default": 200,
      "unit": "px"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "label": "Tỷ lệ ảnh",
      "options": [
        {
          "value": "1/1",
          "label": "Vuông (1:1)"
        },
        {
          "value": "2/3",
          "label": "Dọc (2:3)"
        },
        {
          "value": "4/3",
          "label": "Ngang (4:3)"
        },
        {
          "value": "16/9",
          "label": "Rộng (16:9)"
        }
      ],
      "default": "1/1"
    }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Sản phẩm",
      "limit": 4,
      "settings": [
        {
          "type": "image_picker",
          "id": "product_image",
          "label": "Ảnh thumbnail"
        },
        {
          "type": "image_picker",
          "id": "zoom_image_pc",
          "label": "Ảnh zoom - Desktop"
        },
        {
          "type": "image_picker",
          "id": "zoom_image_mobile",
          "label": "Ảnh zoom - Mobile"
        },
        {
          "type": "text",
          "id": "product_name",
          "label": "Tên sản phẩm",
          "default": "Tên sản phẩm"
        },
        {
          "type": "url",
          "id": "product_link",
          "label": "Link sản phẩm"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Hover Zoom",
      "blocks": [
        { "type": "product" },
        { "type": "product" },
        { "type": "product" },
        { "type": "product" }
      ]
    }
  ]
}
{% endschema %}
